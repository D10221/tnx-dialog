{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 55e89f78c469dcd7c6c5","webpack:///./src/tnx-dialog.ts","webpack:///./src/DialogCtrl.ts"],"names":[],"mappings":"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","file":"dist/tnx-dialog.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"tnx-dialog\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"tnx-dialog\"] = factory();\n\telse\n\t\troot[\"tnx-dialog\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 55e89f78c469dcd7c6c5\n **/","import IDirectiveFactory = angular.IDirectiveFactory;\nimport IScope = angular.IScope;\n\n\nimport Subject = Rx.Subject;\nimport Disposable = Rx.Disposable;\nimport {HTMLDialogElement} from \"./HTMLDialogElement\";\nimport {DialogCtrl} from \"./DialogCtrl\";\nimport {DialogDirectiveScope} from \"./interfaces\";\n\n\ndeclare var componentHandler : { upgradeElements : (x:any)=> void };\n\n\nangular.module('tnx.dialog', [])\n    .controller('DialogCtrl', DialogCtrl)\n    /***\n     *  IN context dialog\n     */\n    .directive('tnxDialog', ()=> {\n        return {\n            restrict: 'E',\n            controller: 'DialogCtrl',\n            controllerAs: 'vm',\n            templateUrl: function (element, attr) {\n                return attr.templateUrl || \"./\";\n            },\n            scope: /*<DialogCtrlScope>*/{\n                /***\n                 * Sender as IObservableThing\n                 */\n                owner: \"=\",\n                /***\n                 * Dialog Options\n                 */\n                header: \"=\",\n\n                commands: '=',\n\n                xid: '='\n            },\n            compile: ()=> {\n                return {\n                    pre: (scope:DialogDirectiveScope, element:ng.IAugmentedJQuery, attr:ng.IAttributes) => {\n\n                        var dialog = element.find('dialog')[0];\n\n                        if (dialog) {\n                            componentHandler.upgradeElements(dialog);\n                        }\n\n                        if (scope.vm) {\n                            scope.vm.dialog = dialog as HTMLDialogElement;\n                        }\n                    }\n                }\n            },\n            transclude: true\n        }\n    });\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/tnx-dialog.ts\n **/","import IDirectiveFactory = angular.IDirectiveFactory;\nimport IScope = angular.IScope;\n\nimport Subject = Rx.Subject;\nimport Disposable = Rx.Disposable;\nimport {HTMLDialogElement} from \"./HTMLDialogElement\";\nimport {IDialogController, DialogCtrlScope, IDialogCommand, DialogOptions} from \"./interfaces\";\n\n\ndeclare var componentHandler : { upgradeElements : (x:any)=> void };\n\nexport class DialogCtrl implements IDialogController {\n\n    constructor($scope:DialogCtrlScope) {\n\n        this.mergeOptions($scope);\n\n        if ($scope.owner) {\n\n            var xEvents = $scope.owner.xEvents.asObservable();\n\n            this.disposables.add(\n                xEvents\n                    .where(e=>e.sender != this)\n                    .where(e=> e.args.value.idx == this.options.xid)\n                    .where(e=> e.args.key == 'show')\n                    .subscribe(this.show)\n            );\n\n            this.disposables.add(\n                xEvents\n                    .where(e=> e.sender != this)\n                    .where(e=> e.args.value.idx == this.options.xid)\n                    .where(e=> e.args.key == 'close')\n                    .subscribe(e=> this.close(null))\n            );\n        }\n\n        this.runCommand = (c:IDialogCommand) => {\n\n            c.canExec = c.canExec || (x=>true);\n\n            if (c.canExec($scope.owner)) {\n\n                var close = c.exec(this);\n\n                if (close) {\n                    this.close(null)\n                }\n            }\n        };\n\n        $scope.$on('$destroy', () => {\n            console.log('DialogCtrl disposing');\n            // watcherDispose();\n            this.dispose();\n        });\n    }\n\n    get header():any {\n        return this.options && this.options.header ? this.options.header : null;\n    }\n\n    runCommand:(c:IDialogCommand) => void;\n\n    dialog:HTMLDialogElement;\n\n    options:DialogOptions = {};\n\n    static $inject = ['$scope'];\n\n    disposables = new Rx.CompositeDisposable();\n\n    dispose() {\n        this.disposables.dispose();\n    }\n\n    show:(e?)=> void = (e) => {\n\n        this.mergeOptions(e.args.value);\n\n        if (this.dialog) {\n            this.dialog.showModal();\n        }\n    };\n\n    close:(e?)=> void = (e)=> {\n        if (this.dialog) {\n            this.dialog.close();\n            this.raiseEvent('close', e);\n        }\n    };\n\n    raiseEvent(key:string, value?:any):void {\n        //defined in constructor\n    }\n\n    mergeOptions(o:DialogOptions|Object) {\n\n        var options = (o as DialogOptions);\n        if (!options) return;\n\n        if (options.xid) {\n            this.options.xid = options.xid;\n        }\n\n        if (options.header) {\n            this.options.header = options.header;\n        }\n\n        this.options.commands = options.commands || [\n                {\n                    text: 'ok',\n                    exec: (x)=> true\n                }\n            ];\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/DialogCtrl.ts\n **/"],"sourceRoot":""}