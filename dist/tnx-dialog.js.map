{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap c1ad403504de3596c70e","webpack:///./src/tnx-dialog.ts","webpack:///./src/DialogCtrl.ts"],"names":[],"mappings":"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","file":"dist/tnx-dialog.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"tnx-dialog\"] = factory();\n\telse\n\t\troot[\"tnx-dialog\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap c1ad403504de3596c70e\n **/","import IDirectiveFactory = angular.IDirectiveFactory;\r\nimport IScope = angular.IScope;\r\n\r\n\r\nimport Subject = Rx.Subject;\r\nimport Disposable = Rx.Disposable;\r\nimport {HTMLDialogElement} from \"./HTMLDialogElement\";\r\nimport {DialogCtrl} from \"./DialogCtrl\";\r\nimport {DialogDirectiveScope} from \"./interfaces\";\r\n\r\n\r\ndeclare var componentHandler : { upgradeElements : (x:any)=> void };\r\n\r\n\r\nangular.module('tnx.dialog', [])\r\n    .controller('DialogCtrl', DialogCtrl)\r\n    /***\r\n     *  IN context dialog\r\n     */\r\n    .directive('tnxDialog', ()=> {\r\n        return {\r\n            restrict: 'E',\r\n            controller: 'DialogCtrl',\r\n            controllerAs: 'vm',\r\n            templateUrl: function (element, attr) {\r\n                return attr.templateUrl || \"./\";\r\n            },\r\n            scope: /*<DialogCtrlScope>*/{\r\n                /***\r\n                 * Sender as IObservableThing\r\n                 */\r\n                owner: \"=\",\r\n                /***\r\n                 * Dialog Options\r\n                 */\r\n                header: \"=\",\r\n\r\n                commands: '=',\r\n\r\n                xid: '='\r\n            },\r\n            compile: ()=> {\r\n                return {\r\n                    pre: (scope:DialogDirectiveScope, element:ng.IAugmentedJQuery, attr:ng.IAttributes) => {\r\n\r\n                        var dialog = element.find('dialog')[0];\r\n\r\n                        if (dialog) {\r\n                            componentHandler.upgradeElements(dialog);\r\n                        }\r\n\r\n                        if (scope.vm) {\r\n                            scope.vm.dialog = dialog as HTMLDialogElement;\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            transclude: true\r\n        }\r\n    });\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/tnx-dialog.ts\n **/","import IDirectiveFactory = angular.IDirectiveFactory;\r\nimport IScope = angular.IScope;\r\n\r\nimport Subject = Rx.Subject;\r\nimport Disposable = Rx.Disposable;\r\nimport {HTMLDialogElement} from \"./HTMLDialogElement\";\r\nimport {IDialogController, DialogCtrlScope, IDialogCommand, DialogOptions} from \"./interfaces\";\r\n\r\n\r\ndeclare var componentHandler : { upgradeElements : (x:any)=> void };\r\n\r\nexport class DialogCtrl implements IDialogController {\r\n\r\n    constructor($scope:DialogCtrlScope) {\r\n\r\n        this.mergeOptions($scope);\r\n\r\n        if ($scope.owner) {\r\n\r\n            var xEvents = $scope.owner.xEvents.asObservable();\r\n\r\n            this.disposables.add(\r\n                xEvents\r\n                    .where(e=>e.sender != this)\r\n                    .where(e=> e.args.value.idx == this.options.xid)\r\n                    .where(e=> e.args.key == 'show')\r\n                    .subscribe(this.show)\r\n            );\r\n\r\n            this.disposables.add(\r\n                xEvents\r\n                    .where(e=> e.sender != this)\r\n                    .where(e=> e.args.value.idx == this.options.xid)\r\n                    .where(e=> e.args.key == 'close')\r\n                    .subscribe(e=> this.close(null))\r\n            );\r\n        }\r\n\r\n        this.runCommand = (c:IDialogCommand) => {\r\n\r\n            c.canExec = c.canExec || (x=>true);\r\n\r\n            if (c.canExec($scope.owner)) {\r\n\r\n                var close = c.exec(this);\r\n\r\n                if (close) {\r\n                    this.close(null)\r\n                }\r\n            }\r\n        };\r\n\r\n        $scope.$on('$destroy', () => {\r\n            console.log('DialogCtrl disposing');\r\n            // watcherDispose();\r\n            this.dispose();\r\n        });\r\n    }\r\n\r\n    get header():any {\r\n        return this.options && this.options.header ? this.options.header : null;\r\n    }\r\n\r\n    runCommand:(c:IDialogCommand) => void;\r\n\r\n    dialog:HTMLDialogElement;\r\n\r\n    options:DialogOptions = {};\r\n\r\n    static $inject = ['$scope'];\r\n\r\n    disposables = new Rx.CompositeDisposable();\r\n\r\n    dispose() {\r\n        this.disposables.dispose();\r\n    }\r\n\r\n    show:(e?)=> void = (e) => {\r\n\r\n        this.mergeOptions(e.args.value);\r\n\r\n        if (this.dialog) {\r\n            this.dialog.showModal();\r\n        }\r\n    };\r\n\r\n    close:(e?)=> void = (e)=> {\r\n        if (this.dialog) {\r\n            this.dialog.close();\r\n            this.raiseEvent('close', e);\r\n        }\r\n    };\r\n\r\n    raiseEvent(key:string, value?:any):void {\r\n        //defined in constructor\r\n    }\r\n\r\n    mergeOptions(o:DialogOptions|Object) {\r\n\r\n        var options = (o as DialogOptions);\r\n        if (!options) return;\r\n\r\n        if (options.xid) {\r\n            this.options.xid = options.xid;\r\n        }\r\n\r\n        if (options.header) {\r\n            this.options.header = options.header;\r\n        }\r\n\r\n        this.options.commands = options.commands || [\r\n                {\r\n                    text: 'ok',\r\n                    exec: (x)=> true\r\n                }\r\n            ];\r\n    }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/DialogCtrl.ts\n **/"],"sourceRoot":""}